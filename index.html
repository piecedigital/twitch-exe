<!DOCTYPE html>
<html>
  <head>
    <title>Twitch Exe</title>
    <link rel="stylesheet" type="text/css" href="main.css">
  </head>
  <body>
    <div id="main-content">
    </div>
    <div id="opening-splash">
      <h3>Welcome to</h3>
      <div>
        <svg  version="1.1" xmlns="&ns_svg;" xmlns:xlink="&ns_xlink;" width="733.728" height="443.275" viewBox="0 0 733.728 443.275"
     overflow="visible" enable-background="new 0 0 733.728 443.275" xml:space="preserve">
        <g id="Layer_4">
        </g>
        <g id="Layer_1_copy">
          <polygon id="wing-blue-anim" fill="#00A2EB" points="734.856,297.912 587.209,356.593 145.355,356.593 -0.717,297.912 -0.717,141.288 145.721,82.606 
            587.574,82.606 734.856,141.288  "/>
          <polygon id="back-blue-anim" fill="#00A2EB" points="613.726,93.855 613.726,344.939 515.555,445.192 218.32,445.192 119.539,345.344 119.539,93.855 
            218.32,-0.157 515.819,-0.157  "/>
          <polygon id="wing-white-anim" fill="#FFFFFF" points="550.466,86.758 687.616,219.528 550.466,352.273 498.318,405.614 236.795,405.614 184.961,352.273 
            47.812,219.528 184.961,86.758 236.796,36.608 498.318,36.608   "/>
          <polygon id="back-white-anim" fill="#FFFFFF" points="695.095,273.572 587.209,317.002 515.819,345.344 367.07,345.344 218.32,345.344 145.355,317.002 
            39.045,273.572 39.045,166.631 145.721,123.198 218.352,93.887 367.07,93.855 515.819,93.855 587.574,123.198 695.095,166.631   "/>
          <!-- eyes -->
          <rect x="259.539" y="147.518" fill="#00A2EB" width="54.651" height="151.164"/>
          <rect x="419.539" y="147.518" fill="#00A2EB" width="54.651" height="151.164"/>
          <!-- end eyes -->
          
          <animateTransform
            xlink:href="#wing-blue-anim"
            attributeName="transform"
            attributeType="XML"
            type="rotate"
            from="0 366.8595 221.633"
            to="360 366.8595 221.633"
            dur="1s"
            repeatCount="indefinite"/>
          <animateTransform
            xlink:href="#back-blue-anim"
            attributeName="transform"
            attributeType="XML"
            type="rotate"
            from="0 366.8595 221.633"
            to="360 366.8595 221.633"
            dur="1s"
            repeatCount="indefinite"
            />
          <animateTransform
            xlink:href="#wing-white-anim"
            attributeName="transform"
            attributeType="XML"
            type="rotate"
            from="0 366.8595 221.633"
            to="360 366.8595 221.633"
            dur="1s"
            repeatCount="indefinite"/>
          <animateTransform
            xlink:href="#back-white-anim"
            attributeName="transform"
            attributeType="XML"
            type="rotate"
            from="0 366.8595 221.633"
            to="360 366.8595 221.633"
            dur="1s"
            repeatCount="indefinite"
            />
        </g>
        </svg>
      </div>
      <h1>Twitch Exe</h1>
    </div>
    <script src="https://fb.me/react-0.14.2.js"></script>
    <script src="https://fb.me/react-dom-0.14.2.js"></script>
    <script src="jquery-1.11.3.min.js"></script>

    <script src="main.js"></script>
    
    <script src="https://ttv-api.s3.amazonaws.com/twitch.min.js"></script>

    <script src="react-views.js"></script>
    <script src="tutopop.js"></script>
    <script>
    var optionsTutorial = [
      {
        dialogX: document.querySelector("#options-bar").offsetLeft + 50,
        dialogY: document.querySelector("#options-bar").offsetTop + 110,
        highlightX: document.querySelector("#options-bar").offsetLeft + 130,
        highlightY: document.querySelector("#options-bar").offsetTop,
        highlightRadius: 5,
        highlightWidth: document.querySelector("#options-bar").offsetWidth,
        highlightHeight: document.querySelector("#options-bar").offsetHeight,
        msg: "In this options bar you can go back to the previous page, search for streams, and login/out!",
        side: "top"
      },
      {
        dialogX: document.querySelector("#options-bar").offsetLeft + 50,
        dialogY: document.querySelector("#options-bar").offsetTop + 130,
        highlightX: document.querySelector("#options-bar").offsetLeft + 130,
        highlightY: document.querySelector("#options-bar").offsetTop,
        highlightRadius: 5,
        highlightWidth: document.querySelector("#options-bar").offsetWidth,
        highlightHeight: document.querySelector("#options-bar").offsetHeight,
        msg: "The search bar supports multitwitch links, and a pseudo multistream URL (eg, http://multitwitch.tv/riotgames/ohnips/snowlit/suppycolleen, ms://riotgames/ohnips/snowlit/suppycolleen)",
        side: "top",
        maxWidth: 20*16
      }
    ];
    var viewerTutorial = [
      {
        dialogX: document.querySelector("#viewer-controls").offsetLeft,
        dialogY: document.querySelector("#viewer-controls").offsetTop + 110,
        highlightX: document.querySelector("#viewer-controls").offsetLeft + 130,
        highlightY: document.querySelector("#viewer-controls").offsetTop,
        highlightRadius: 5,
        highlightWidth: document.querySelector("#viewer-controls").offsetWidth + 180,
        highlightHeight: document.querySelector("#viewer-controls").offsetHeight,
        msg: "In this viewer you have the options to close the stream, shrink the view, and hide the chat!",
        side: "top"
      },
      {
        dialogX: document.querySelector("#viewer-controls").offsetLeft + 200,
        dialogY: document.querySelector("#viewer-controls").offsetTop + 110,
        highlightX: document.querySelector("#viewer-controls").offsetLeft + 180,
        highlightY: document.querySelector("#viewer-controls").offsetTop,
        highlightRadius: 5,
        highlightWidth: document.querySelector("#viewer-controls").offsetWidth + 180,
        highlightHeight: document.querySelector("#viewer-controls").offsetHeight,
        msg: "You also have the option to follow/unfollow the currently in-view stream, and you can tab to the available chat windows!",
        side: "top"
      }
    ];
    
    remote.require("./handle-con-data").loadConcurrentData(function(data) {
      var newUserData = JSON.parse(data);

      var setViewerTutTrue = function() {
        newUserData.wentThroughTut.viewer = true;

        remote.require("./handle-con-data").saveConcurrentData(newUserData);
      }
      var setOptionsTutTrue = function() {
        newUserData.wentThroughTut.options = true;

        remote.require("./handle-con-data").saveConcurrentData(newUserData);
      }

      if(typeof newUserData === "object") {
        if(!newUserData.wentThroughTut.viewer) {
          var openTut = function() {
            tutoPop(viewerTutorial, ["#6441a5", "white"], null, setViewerTutTrue, setViewerTutTrue).timeline({
              highlight: true,
              opacity: .5,
              color: "black"
            });

          }
          document.addEventListener("click", function(e) {
            if(e.target.hasClass(["following-stream-item", "featured-stream-item","stream-link"])) {
              openTut()
            }
          });

        }
        if(!newUserData.wentThroughTut.options) {
          tutoPop(optionsTutorial, ["#6441a5", "white"], null, setOptionsTutTrue, setOptionsTutTrue).timeline({
            highlight: true,
            opacity: .5,
            color: "black"
          });
        }
      } else {
        console.log(newUserData)
      }
    });
    </script>
  </body>
</html>